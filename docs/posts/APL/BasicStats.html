<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Isaac Flath">
<meta name="dcterms.date" content="2022-09-20">
<meta name="description" content="Sampling and Bootstrapping Statistics in APL">

<title>Bootstrapping – Isaac Flath</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../favicon/favicon-32x32.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-XNZGT59XWP"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-XNZGT59XWP', { 'anonymize_ip': true});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Bootstrapping – Isaac Flath">
<meta property="og:description" content="Sampling and Bootstrapping Statistics in APL">
<meta property="og:image" content="https://isaac-flath.tech/posts/_TopicImages/bootstrap.jpeg">
<meta property="og:site_name" content="Isaac Flath">
<meta property="og:locale" content="en_US">
<meta name="twitter:title" content="Bootstrapping – Isaac Flath">
<meta name="twitter:description" content="Sampling and Bootstrapping Statistics in APL">
<meta name="twitter:image" content="https://isaac-flath.tech/posts/_TopicImages/bootstrap.jpeg">
<meta name="twitter:creator" content="@isaac_flath">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Isaac Flath</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../til.html"> 
<span class="menu-text">TIL</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../testimonials.html"> 
<span class="menu-text">Testimonials</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Bootstrapping</h1>
                  <div>
        <div class="description">
          Sampling and Bootstrapping Statistics in APL
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">APL</div>
                <div class="quarto-category">Data Exploration</div>
                <div class="quarto-category">Testing</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Isaac Flath </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 20, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#samplingbootstrapping" id="toc-samplingbootstrapping" class="nav-link active" data-scroll-target="#samplingbootstrapping"><span class="header-section-number">1</span> Sampling/Bootstrapping</a>
  <ul class="collapse">
  <li><a href="#why-bootstrapping" id="toc-why-bootstrapping" class="nav-link" data-scroll-target="#why-bootstrapping"><span class="header-section-number">1.1</span> Why Bootstrapping</a></li>
  <li><a href="#why-apl" id="toc-why-apl" class="nav-link" data-scroll-target="#why-apl"><span class="header-section-number">1.2</span> Why APL</a></li>
  </ul></li>
  <li><a href="#sampling-distribution" id="toc-sampling-distribution" class="nav-link" data-scroll-target="#sampling-distribution"><span class="header-section-number">2</span> Sampling Distribution</a>
  <ul class="collapse">
  <li><a href="#create-1-sample" id="toc-create-1-sample" class="nav-link" data-scroll-target="#create-1-sample"><span class="header-section-number">2.1</span> Create 1 Sample</a></li>
  <li><a href="#create-sampling-distribution" id="toc-create-sampling-distribution" class="nav-link" data-scroll-target="#create-sampling-distribution"><span class="header-section-number">2.2</span> Create sampling distribution</a></li>
  </ul></li>
  <li><a href="#calculate-statistics" id="toc-calculate-statistics" class="nav-link" data-scroll-target="#calculate-statistics"><span class="header-section-number">3</span> Calculate statistics</a>
  <ul class="collapse">
  <li><a href="#confidence-intervals" id="toc-confidence-intervals" class="nav-link" data-scroll-target="#confidence-intervals"><span class="header-section-number">3.1</span> Confidence Intervals</a></li>
  <li><a href="#p-values" id="toc-p-values" class="nav-link" data-scroll-target="#p-values"><span class="header-section-number">3.2</span> P values</a>
  <ul class="collapse">
  <li><a href="#p-value-on-equal-means" id="toc-p-value-on-equal-means" class="nav-link" data-scroll-target="#p-value-on-equal-means"><span class="header-section-number">3.2.1</span> P value on equal means</a></li>
  <li><a href="#p-value-on-different-means" id="toc-p-value-on-different-means" class="nav-link" data-scroll-target="#p-value-on-different-means"><span class="header-section-number">3.2.2</span> P value on different means</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="samplingbootstrapping" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Sampling/Bootstrapping</h1>
<p>This post shows how to calculate statistics in the way I believe should be the default for data scientists, bootstrapping. If you are not familiar with this approach and think it sounds intriguing, <a href="https://www.lock5stat.com/">check out this page</a> to find a great book to get a fantastic start on bootstrapping and practical statistics.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The quality and simplicity of the APL code in this post was improved thanks to the kind feedback provided by rak1507. It’s awesome to have experienced community members like rak1507 that are willing to read through material written by people newer to array programming and offer feedback in a supportive way.</p>
</div>
</div>
<section id="why-bootstrapping" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="why-bootstrapping"><span class="header-section-number">1.1</span> Why Bootstrapping</h2>
<p>Because this opinions seems to put me in the minority of data scientists I am writing a short piece on why bootstrapping here.</p>
<p>In classical statistics, very clever algebraic formulas are used to approximate a sampling distribution, and that approximation can be used to calculate a p-value or a confidence interval or other statistics. These formulas rely on assumptions about the data and do not work if those baked in assumptions are not true. In other words they are really shortcuts to calculating an answer that work in specific situations.</p>
<p>In modern days, we do not need to approximate a sampling distribution using algebra. We can do something much more elementary, more powerful, and more flexible. Thanks to modern computers, we can just sample our data repeatedly to create an actual sampling distribution and calculate based off of that. You get the same answer. So why do I advocate for a bootstrapping first approach?</p>
<ul>
<li>It is simpler and more intuitive. This means it is far easier to craft custom tests and statistics based on whatever you want and reason about what things are.</li>
<li>Bootstrapping assumes nothing other than you have data. Classical statistical formulas are shortcuts that are enabled with baked in assumptions about the data. This means the same boostrapping approach works in basically all situations, where classical statistical formulas only apply in the particular situations they were designed for.</li>
</ul>
<p>For this reason I believe it should be the default and you can change to computational shortcuts in the situations where it makes sense (ie you are very confident you understand assumptions, confident they are true in your problem, and the amount of data makes it non-trivial to bootstrap).</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Much of this next bit is heavily inspired by <a href="https://www.lock5stat.com/Lock5Overview.pdf">Overview of Statistics: UnLocking the Power of Data By Lock, Lock, Lock, Lock, and Lock Published by Wiley (2012)</a>. I have summarized key points that I think are relevant to what I want to communicate. For example, the quotes I am using are quotes I originally saw in their article.</p>
</div>
</div>
<p>Many of the top statisticians have known bootstrapping is a more elementary but more flexible approach for longer than the approach was computationally feasible. For example, in 1936 Sir R.A. Fisher (who created the foundations of statistical inference) spoke about using this bootstrapping approach:</p>
<blockquote class="blockquote">
<p>Actually, the statistician does not carry out this very simple and very tedious process, but his conclusions have no justification beyond the fact that they agree with those which could have been arrived at by this elementary method.</p>
</blockquote>
<p>While these methods were tedious in 1936, they are trivial thanks to modern computers. We no longer have to do clever algebraic tricks to approximate a sampling distribution - we can just create a sampling distribution, as George Cobb pointed out in the journal <em>Technology Innovations in Statistical Education</em>.</p>
<blockquote class="blockquote">
<p>What we teach is largely the technical machinery of numerical approximations based on the normal distribution and its many subsidiary cogs. This machinery was once necessary, because the conceptually simpler alternative based on permutations was computationally beyond our reach. Before computers statisticians had no choice. These days we have no excuse.</p>
</blockquote>
</section>
<section id="why-apl" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="why-apl"><span class="header-section-number">1.2</span> Why APL</h2>
<ul>
<li>Because it’s cool</li>
<li>Because most modeling now-a-days is done via array programming and learning, and APL is a fantastic way to get better at that</li>
<li>Because it’s a more consistent math noting</li>
</ul>
</section>
</section>
<section id="sampling-distribution" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Sampling Distribution</h1>
<p>A sampling distribution is a distribution of samples. Let’s talk about what that means.</p>
<p>First, a <strong>sample</strong> is a subset of our data. <code>[1, 0, 2, 1]</code> is a sample of <code>[0, 1, 2, 3]</code>. A few things about samples: + We will sample by taking a random selection of values from our data. + We are sampling with replacement, meaning we can pick the same data point multiple times.</p>
<p>Next, a <strong>distribution</strong> is mostly just a bunch of data points. In our case we are going to have a bunch of samples.</p>
<p>So we need a way to create a sample, and then we need to do that a bunch of times. Let’s get started.</p>
<div id="61e2891f" class="cell">
<pre class="apl cell-code"><code>]box on -style=max</code></pre>
<div class="cell-output cell-output-display">
<pre class="language-APL">┌→────────────────┐
│Was ON -style=max│
└─────────────────┘
</pre>
</div>
</div>
<section id="create-1-sample" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="create-1-sample"><span class="header-section-number">2.1</span> Create 1 Sample</h2>
<p>Let’s start with creating a sample</p>
<ul>
<li>Create some data for us to sample</li>
<li>Get 5 random numbers between 1 and 10 (no duplicate numbers)</li>
</ul>
<div id="9019e410" class="cell">
<pre class="apl cell-code"><code>⎕←V ← 5?10</code></pre>
<div class="cell-output cell-output-display">
<pre class="language-APL">┌→─────────┐
│4 3 10 1 5│
└~─────────┘
</pre>
</div>
</div>
<p>Next we need to get a random sample of indexes from our data <code>V</code>. We can do that in 3 steps: 1. Get the total number of elements in our data array with <code>≢V</code> (tally the Vector) 1. Create an array of the size of the sample we want and fill it with <code>≢V</code> using <code>10⍴≢V</code>. Create an array of dimension 10 with containing the tally of the vector. APL will broadcase to make all elements equal to <code>≢V</code> automatically. 1. <code>?</code> will roll a die for each element between 1 and the value of the element. This gives us random index locations for each sample we want.</p>
<p>Put that all together and we have code that:</p>
<ul>
<li>Get random sample of indexes</li>
<li>Get 10 random numbers between 1 and ≢V (duplicates allowed)</li>
</ul>
<div id="19a37250" class="cell">
<pre class="apl cell-code"><code>⎕←S←?10⍴≢V</code></pre>
<div class="cell-output cell-output-display">
<pre class="language-APL">┌→──────────────────┐
│3 2 2 2 2 5 1 2 4 2│
└~──────────────────┘
</pre>
</div>
</div>
<p>Since that created random index locations, we can look those indexes up in our original vector <code>V</code> to get our random sample.</p>
<div id="6f45f38d" class="cell">
<pre class="apl cell-code"><code>V[S]</code></pre>
<div class="cell-output cell-output-display">
<pre class="language-APL">┌→───────────────────┐
│10 3 3 3 3 5 4 3 1 3│
└~───────────────────┘
</pre>
</div>
</div>
<p>If we put that together we get a nice compact way of drawing a sample.</p>
<div id="be19cd56" class="cell">
<pre class="apl cell-code"><code>V[?10 ⍴ ≢V]</code></pre>
<div class="cell-output cell-output-display">
<pre class="language-APL">┌→───────────────────┐
│3 10 3 3 1 4 3 4 3 3│
└~───────────────────┘
</pre>
</div>
</div>
</section>
<section id="create-sampling-distribution" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="create-sampling-distribution"><span class="header-section-number">2.2</span> Create sampling distribution</h2>
<p>We drew a sample, but really what we want to do is draw a whole bunch of samples. All we have to do is create a matrix of indices instead of a vector and the exact same approach works.</p>
<p>This is the same as above, except instead of <code>10 ⍴</code> to create an array of shape 10, we use <code>5 10 ⍴</code> to create an array of shape 5 by 10.</p>
<p>For convenience I store the shapes in a variable for later use.</p>
<div id="482f4928" class="cell">
<pre class="apl cell-code"><code>V[?(n←5) (ss←10) ⍴ ≢V]</code></pre>
<div class="cell-output cell-output-display">
<pre class="language-APL">┌→──────────────────────────┐
↓ 4 4  3  4  1  5  4 3  3 10│
│ 1 3 10  5  3  4 10 1  4 10│
│ 5 1 10 10  5  3  3 4  1  4│
│10 5 10  1 10  3  1 4 10  1│
│10 5  5  5  1 10  3 3  1 10│
└~──────────────────────────┘
</pre>
</div>
</div>
</section>
</section>
<section id="calculate-statistics" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Calculate statistics</h1>
<p>Now that we know how to calculate a sampling distribution we can calculate some statistics. I will start with confidence intervals, then move into p values.</p>
<section id="confidence-intervals" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="confidence-intervals"><span class="header-section-number">3.1</span> Confidence Intervals</h2>
<p>Lets do a bigger sample and calculate our confidence interval using 10000 random numbers between 1 and 100.</p>
<div id="1033b2bb" class="cell">
<pre class="apl cell-code"><code>data ← ?10000/100 

10↑data ⍝ look at first 10 values</code></pre>
<div class="cell-output cell-output-display">
<pre class="language-APL">┌→───────────────────────────┐
│50 3 15 43 93 60 96 29 71 58│
└~───────────────────────────┘
</pre>
</div>
</div>
<p>Next we can calculate a sampling distribution and look a a few of them. We use the code from before but with 1000 pulls.</p>
<div id="91c96831" class="cell">
<pre class="apl cell-code"><code>sampling_distribution←data[? (n←1000) (ss←10) ⍴ ≢ data]
5↑sampling_distribution</code></pre>
<div class="cell-output cell-output-display">
<pre class="language-APL">┌→─────────────────────────────┐
↓20 56 92 100 34 89 28 92 10 21│
│34 95 89  69 35 81 25 25 80 87│
│77 68 32  77 57 20 10 20 21 95│
│37 73 19  79 11 88 13  1 90 68│
│70 42 10  74 62 34 82 17  3 19│
└~─────────────────────────────┘
</pre>
</div>
</div>
<p>We want to do a confidence interval on the mean so we need to calculate the mean of each of these samples.</p>
<ul>
<li><code>+/</code> Row-wise sum (trailing axis)</li>
<li><code>ss÷⍨</code> divides each element by ss (ss defined when creating sampling distribution)</li>
</ul>
<div id="e9a7f7b9" class="cell">
<pre class="apl cell-code"><code>sample_means ← ss÷⍨+/ sampling_distribution
8↑sample_means</code></pre>
<div class="cell-output cell-output-display">
<pre class="language-APL">┌→────────────────────────────────────┐
│54.2 62 47.7 47.9 41.3 63.5 50.7 44.3│
└~────────────────────────────────────┘
</pre>
</div>
</div>
<p>Now we calculate at 90% confidence interval on our sample mean. That means we are 90% confident our mean will land in the given interval range. This is easy to do because we have calculated the mean of a good sampling distribution so we just need to cut off the top and bottom 5% of values and 90% of the values landed in that range.</p>
<ul>
<li>⍋ sorts ascending, then cut off first 50 and take the first 900 of that</li>
</ul>
<div id="2b2b0607" class="cell">
<pre class="apl cell-code"><code>order90 ← 900↑50↓⍋sample_means</code></pre>
</div>
<p>Get min and max of middle 90% of sample means, which is our 90% confidence interval. Because our data is sorted we can just get the first and last value.</p>
<div id="c1f9731e" class="cell">
<pre class="apl cell-code"><code>sample_means[⊣/order90]
sample_means[⊢/order90]</code></pre>
<div class="cell-output cell-output-display">
<pre class="language-APL">    
36.2
    
</pre>
</div>
<div class="cell-output cell-output-display">
<pre class="language-APL">    
65.5
    
</pre>
</div>
</div>
<p>We know we are 90 percent confident that a mean based on a sample size of 10 will land in that range because we did that and found that to be true.</p>
</section>
<section id="p-values" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="p-values"><span class="header-section-number">3.2</span> P values</h2>
<p>Let’s say we have 2 sets of data and we want to know whether some statistics are different between them. We have 10,000 samples of our original data, and we ran an experiment and got 100 datapoints with our new process. We want to calculate a p value to see if it supports our hypothesis that it had a statistically significant impact.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Statistically significant impact does not necessarily mean practically significant. This test is doing the basic (are these 2 means different), but often that isn’t really that helpful of a question. Often we want to ask “are these 2 means different by at least X”. After reviewing the simple examples think through how you might be able to design that test via bootstrapping!</p>
</div>
</div>
<section id="p-value-on-equal-means" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="p-value-on-equal-means"><span class="header-section-number">3.2.1</span> P value on equal means</h3>
<div id="044a5461" class="cell">
<pre class="apl cell-code"><code>baseline ← 1-⍨2×⍨?10000/0
experiment ← 0.5-⍨?100/0</code></pre>
</div>
<p>These should have roughly the same means so we should get a large p value and show the difference is not statistically significant</p>
<p>Let’s run the test and see what we get. First let’s get our statistic from our experiment (mean).</p>
<div id="6bd48af6" class="cell">
<pre class="apl cell-code"><code>⎕←experiment_mean ← (+/experiment) ÷ ≢experiment</code></pre>
<div class="cell-output cell-output-display">
<pre class="language-APL">             
0.02131968282
             
</pre>
</div>
</div>
<p>Now let’s create our sampling distribution on our baseline.</p>
<div id="6d16dd1a" class="cell">
<pre class="apl cell-code"><code>sampling_distribution←baseline[? (n←1000) (ss←10) ⍴ ≢ baseline]</code></pre>
</div>
<p>Calculate the means of each.</p>
<div id="ea53d0ef" class="cell">
<pre class="apl cell-code"><code>sampling_means ← ss ÷⍨ +/sampling_distribution</code></pre>
</div>
<p>We then calculate a p value by seeing what percentage of sample means our experiment mean is more extreme than. We can check this on both ends of the distribution and we would take the smaller one normally.</p>
<div id="5854f526" class="cell">
<pre class="apl cell-code"><code>n ÷⍨ +/ experiment_mean&gt;sampling_means
n ÷⍨ +/ experiment_mean&lt;sampling_means</code></pre>
<div class="cell-output cell-output-display">
<pre class="language-APL">     
0.545
     
</pre>
</div>
<div class="cell-output cell-output-display">
<pre class="language-APL">     
0.455
     
</pre>
</div>
</div>
</section>
<section id="p-value-on-different-means" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="p-value-on-different-means"><span class="header-section-number">3.2.2</span> P value on different means</h3>
<div id="926aa83d" class="cell">
<pre class="apl cell-code"><code>baseline ← ?10000/0
experiment ← 0.2-⍨?100/0</code></pre>
</div>
<p>These should have different means so we should get a large p value and show the different is not practically significant</p>
<p>Let’s run the test and see what we get. First let’s get our statistic from our experiment (mean).</p>
<div id="c71600ea" class="cell">
<pre class="apl cell-code"><code>⎕←experiment_mean ← (+/experiment) ÷ ≢experiment</code></pre>
<div class="cell-output cell-output-display">
<pre class="language-APL">           
0.302065664
           
</pre>
</div>
</div>
<p>Now let’s create our sampling distribution on our baseline.</p>
<div id="28ad2ca9" class="cell">
<pre class="apl cell-code"><code>sampling_distribution← baseline[? (n←1000) (ss←10) ⍴ ≢ baseline]</code></pre>
</div>
<div id="0b30f6ed" class="cell">
<pre class="apl cell-code"><code>sampling_means ← ss ÷⍨ +/sampling_distribution</code></pre>
</div>
<p>We then calculate a p value by seeing what percentage of sample means our experiment mean is more extreme than. We can check this on both ends of the distribution, but we would take the smaller one. We can see our p value is quite small - it successfully detected that we likely have a different mean.</p>
<div id="cc1cef9e" class="cell">
<pre class="apl cell-code"><code>n ÷⍨ +/ sampling_means &gt; experiment_mean
n ÷⍨ +/ sampling_means &lt; experiment_mean</code></pre>
<div class="cell-output cell-output-display">
<pre class="language-APL">     
0.993
     
</pre>
</div>
<div class="cell-output cell-output-display">
<pre class="language-APL">     
0.007
     
</pre>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/isaac-flath\.tech\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="Isaac-Flath/blog-comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Isaac Flath</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://linkedin.com/in/isaacflath/">
<p>LinkedIn</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://github.com/isaac-flath">
<p>Github</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://twitter.com/isaac_flath">
<p>Twitter</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../blog.xml">
<p>Blog RSS</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../til.xml">
<p>TIL RSS</p>
</a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>